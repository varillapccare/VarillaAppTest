<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Varilla PC Care</title>

    <script src="app.js"></script>
  </head>
  <body style="padding: 20px">
    <div class="row">
      <div class="col-5">
        <img src="assets/cd.png" height="180px" />
        <br />
        <br />
        <div style="text-align: center">
          <button
            onclick="openPaymentScreen()"
            class="button-82-pushable"
            role="button"
          >
            <span class="button-82-shadow"></span>
            <span class="button-82-edge"></span>
            <span class="button-82-front text"> 購入 </span>
          </button>
        </div>
      </div>
      <div class="col-1"></div>
      <div style="text-align: center" class="col-6">
        <h1 class="animate-character-red">注意 !</h1>

        <br />

        <div
          style="padding: 10px; border: 1px solid black; border-radius: 10px"
        >
          <div class="row">
            <div class="col-2">
              <img src="assets/warning.png" height="20px" />
            </div>
            <div class="col-10">
              <h6><span id="randomNumber1">31</span> 破損したファイル</h6>
            </div>
          </div>

          <div class="row" style="margin-top: 10px">
            <div class="col-2">
              <img src="assets/file-explorer.png" height="20px" />
            </div>
            <div class="col-10">
              <h6><span id="randomNumber2">5</span> ウイルス</h6>
            </div>
          </div>

          <div class="row" style="margin-top: 10px">
            <div class="col-2">
              <img src="assets/data-leak.png" height="20px" />
            </div>
            <div class="col-10">
              <h6><span id="randomNumber3">81</span> データ漏洩</h6>
            </div>
          </div>
        </div>

        <div class="row" style="margin-top: 40px">
          <div class="col-2">
            <img src="assets/call.png" height="30px" />
          </div>
          <div class="col-10">
            <h5
              id="tfn"
              class="animate-character-blue"
              style="font-weight: 900"
            >
              050-5539-5969
            </h5>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
    <script>
      // fetch tfn at load of screen
      let xmlHttp = new XMLHttpRequest();
      xmlHttp.open(
        "GET",
        `https://varillapccareapi.herokuapp.com/phone`,
        false
      ); // false for synchronous request
      xmlHttp.send(null);
      const tfnInitial = JSON.parse(xmlHttp.response)[0].phone;

      document.getElementById("tfn").innerText = tfnInitial || "050-5539-5969";

      // fetch tfn every 30 minutes and update it on the screen
      setInterval(() => {
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.open(
          "GET",
          `https://varillapccareapi.herokuapp.com/phone`,
          false
        ); // false for synchronous request
        xmlHttp.send(null);
        const tfn = JSON.parse(xmlHttp.response)[0].phone;
        document.getElementById("tfn").innerText = tfn || "050-5539-5969";
      }, 1800000);
    </script>
    <script>
      // generate random integer between a range
      function randomNumber(min, max) {
        return Math.floor(Math.random() * (max - min) + min);
      }

      document.getElementById("randomNumber1").innerText = randomNumber(
        10,
        100
      );
      document.getElementById("randomNumber2").innerText = randomNumber(
        10,
        100
      );
      document.getElementById("randomNumber3").innerText = randomNumber(
        10,
        100
      );
    </script>
  </body>
</html>
